<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE Form[
  <!ENTITY foritem "<dynStyle><ui:inline>display: none;</ui:inline><ui:expression>row.IsService</ui:expression></dynStyle>">
  <!ENTITY forservice "<dynStyle><ui:inline>display: none;</ui:inline><ui:expression>!row.IsService</ui:expression></dynStyle>">
  <!ENTITY pricescale "2">
  <!ENTITY costscale "2">
]>
<f:Form xmlns="http://www.butent.com/widget"
  xmlns:f="http://www.butent.com/form"
  xmlns:ui="http://www.butent.com/ui"
  
  name="Item" viewName="Items" caption="=item"
  width="700" height="450"
  >
  <FlowPanel class="flexBox-vertical">
    <Table style="margin-top: 1ex;">
      <col index="0" kind="label" />
      <col index="2" kind="label" />
      
      <row>
        <Label for="Type" />
        <DataSelector source="Type" />

        <Label for="Group" />
        <DataSelector source="Group" />
      </row>

      <row>
        <Label for="Name" />
        <cell colSpan="5">
          <InputText source="Name" autocomplete="true" visible="true" style="width: 100%;" />
        </cell>
      </row>

      <row>
        <Label for="Article" />
        <InputText source="Article" />

        <Label for="Unit" text="=unitShort" />
        <DataSelector source="Unit" visible="true" editEnabled="false" style="width: 80px;" />

        <CheckBox source="Vat" text="=vat" />
        <cell style="padding-left: 6px;">
          <FlowPanel>
            <InputDecimal source="VatPercent" style="width: 40px;" />
            <InlineLabel html="%" style="padding-left: 3px;"/>
          </FlowPanel>
        </cell>
      </row>

      <row>
        <Label for="Barcode" />
        <InputText source="Barcode" />

        <Label for="TimeUnit" module="Trade.Acts">
          &forservice;
        </Label>
        <ListBox source="TimeUnit" style="width: 80px;" module="Trade.Acts">
          &forservice;
        </ListBox>
      </row>

      <row data="ItemCategories">
        <Label text="=itemCategories" />
        <cell colSpan="5">
          <ChildSelector name="Categories" childTable="ItemCategories" viewName="CategoryTree" 
            targetRelColumn="Item" sourceRelColumn="Category" newRowEnabled="false"
            renderColumns="ParentName Name" label="=categories" style="width: 100%;" />
        </cell>
      </row>
    </Table>
    
    <br/>
    <TabbedPages class="flexible">
      <page>
        <text>=prices</text>
        <Table style="margin-top: 1ex;">
          <col index="0" kind="label" />
          <col index="2" cellStyle="padding-left: 6px;" />

          <row>
            <Label for="Price" />
            <InputDecimal source="Price" currencySource="Currency" scale="&pricescale;"
              summarize="true" />
            <DataSelector source="Currency" for="Price" newRowEnabled="false" editEnabled="false"
              style="width: 50px;" />
          </row>

          <row>
            <Label for="Cost" />
            <InputDecimal source="Cost" currencySource="CostCurrency" scale="&costscale;"
              summarize="true" />
            <DataSelector source="CostCurrency" for="Cost" newRowEnabled="false" editEnabled="false"
              style="width: 50px;" />
          </row>

          <row>
            <Label for="Price1" />
            <InputDecimal source="Price1" currencySource="Currency1" scale="&pricescale;"
              summarize="true" />
            <DataSelector source="Currency1" for="Price1" newRowEnabled="false" editEnabled="false"
              style="width: 50px;" />
          </row>

          <row>
            <Label for="Price2" />
            <InputDecimal source="Price2" currencySource="Currency2" scale="&pricescale;"
              summarize="true" />
            <DataSelector source="Currency2" for="Price2" newRowEnabled="false" editEnabled="false"
              style="width: 50px;" />
          </row>

          <row>
            <Label for="Price3" />
            <InputDecimal source="Price3" currencySource="Currency3" scale="&pricescale;"
              summarize="true" />
            <DataSelector source="Currency3" for="Price3" newRowEnabled="false" editEnabled="false"
              style="width: 50px;" />
          </row>
        </Table>
      </page>

      <page>
        <text>=additionalInfo</text>
        <Table style="margin-top: 1ex;">
          <col index="0" kind="label" />
          <col index="2" kind="label" />
      
          <row>
            <Label for="Name2" />
            <cell colSpan="3">
              <InputText source="Name2" autocomplete="true" visible="true" style="width: 100%;"
                summarize="true" />
            </cell>
          </row>
          <row>
            <Label for="Name3" />
            <cell colSpan="3">
              <InputText source="Name3" autocomplete="true" visible="true" style="width: 100%;"
                summarize="true" />
            </cell>
          </row>
          <row>
            <Label for="Article2" />
            <InputText source="Article2" summarize="true" />

            <Label for="Ordinal" />
            <InputInteger source="Ordinal" style="width: 80px;" summarize="true" />
          </row>

          <row>
            <Label for="Department" data="Departments" />
            <DataSelector source="Department" data="Departments" summarize="true" />

            <Label for="ExternalCode" />
            <InputText source="ExternalCode" summarize="true" />
          </row>

          <row>
            <Label for="ActivityType" data="ActivityTypes" />
            <DataSelector source="ActivityType" data="ActivityTypes" summarize="true" />

            <Label for="CostCenter" data="CostCenters" />
            <DataSelector source="CostCenter" data="CostCenters" summarize="true" />
          </row>

          <row>
            <Label for="Weight">
              &foritem;
            </Label>
            <InputDecimal source="Weight" style="width: 80px;" summarize="true">
              &foritem;
            </InputDecimal>

            <Label for="Area">
              &foritem;
            </Label>
            <InputDecimal source="Area" style="width: 80px;" summarize="true">
              &foritem;
            </InputDecimal>
          </row>

          <row>
            <Label for="DaysPerWeek" module="Trade.Acts">
              &forservice;
            </Label>
            <InputInteger source="DaysPerWeek" maxValue="7" style="width: 20px;"
              module="Trade.Acts" summarize="true">
              &forservice;
            </InputInteger>

            <Label for="MinTerm" module="Trade.Acts">
              &forservice;
            </Label>
            <InputInteger source="MinTerm" style="width: 40px;" module="Trade.Acts"
              summarize="true">
              &forservice;
            </InputInteger>
          </row>
        </Table>
      </page>  

      <page>
        <text>=pictures</text>
        <Gallery viewName="ItemGraphics" relColumn="Item" pictureColumn="Picture"
          orderColumn="Ordinal" />
      </page>

      <page for="Description">
        <text>=description</text>
        <SimplePanel>
          <InputArea source="Description" class="occupy-1" summarize="true" />
        </SimplePanel>
      </page>

      <page for="Notes">
        <text>=notes</text>
        <SimplePanel>
          <InputArea source="Notes" class="occupy-1" summarize="true" />
        </SimplePanel>
      </page>  
    </TabbedPages>
  </FlowPanel>
</f:Form>  
