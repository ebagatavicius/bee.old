<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE Form [
  <!ENTITY section "margin-top: 5px;">
  <!ENTITY bold "font-weight: bold;">
  <!ENTITY form "PrintServiceInvoice">
]>
<f:Form xmlns="http://www.butent.com/widget"
  xmlns:f="http://www.butent.com/form"
  xmlns:ui="http://www.butent.com/ui" 
  
  name="&form;" caption="=trdInvoice" disabledActions="save"
  width="70" widthUnit="%" height="90" heightUnit="%"
  >
  <FlowPanel style="padding: 10px; background-color: white;">
    <HorizontalPanel>
      <Image  url="images/logo.png" />
      <cell width="100" widthUnit="%">
        <FlowPanel style="text-align:center;">
          <Label html="PVM Sąskaita-faktūra" style="&bold;" />
          <TextLabel source="InvoiceNo">
            <renderToken source="InvoicePrefix" prefix="Serija " suffix=" " />
            <renderToken source="InvoiceNo" prefix="Nr. " />
          </TextLabel>
        </FlowPanel>
      </cell>
    </HorizontalPanel>

    <FlowPanel style="&section;">
      <Table style="width: 100%;">
        <row>
          <cell rowSpan="2" style="vertical-align: top;">
            <Label html="Tiekėjas:" />
          </cell>
          <cell rowSpan="2" style="vertical-align: top; width: 50%;">
            <FlowPanel name="Supplier" />
          </cell>
          <cell style="vertical-align:top;">
            <Label html="Gavėjas:" horizontalAlignment="right" />
          </cell>
          <cell style="vertical-align:top; width:50%;">
            <FlowPanel name="Customer" />
          </cell>
        </row>

        <row>
          <cell style="vertical-align:top;">
            <TextLabel horizontalAlignment="right">
              <render>
                <ui:expression>row.Payer ? "Mokėtojas:" : null</ui:expression>
              </render>
            </TextLabel>
          </cell>
          <cell style="vertical-align:top;">
            <FlowPanel name="Payer" />
          </cell>
        </row>
      </Table>
    </FlowPanel>

    <DateTimeLabel source="Date" format="DATE_LONG" horizontalAlignment="right" />

    <Table name="InvoiceDetails" style="&section; width: 100%;">
      <properties rateCurrency="EUR" />
      <row>
        <Label text="=itemName">
          <properties name="Name" />
        </Label>
        <Label text="=article">
          <properties name="Article" />
        </Label>
        <Label text="=trdQuantity">
          <properties name="Quantity" />
        </Label>
        <Label text="=unit">
          <properties name="Unit" />
        </Label>
        <Label text="=trdPrice">
          <properties name="Price" />
        </Label>
        <Label text="=trdAmountWoVat">
          <properties name="Amount" />
        </Label>
        <Label text="=trdVat" horizontalAlignment="right">
          <properties name="Vat" />
        </Label>
        <FlowPanel>
          <properties name="RateAmount" />
          <InlineLabel text="=trdAmount" />
          <InlineLabel html="EUR" style="padding-left: 3px;" />
        </FlowPanel>
      </row>

      <row>
        <cell colSpan="5">
          <FlowPanel style="text-align: right;">
            <Label text="Bendra suma:" />
            <Label text="PVM suma:" />
            <Label text="VISO:" />
          </FlowPanel>
        </cell>
        <FlowPanel>
          <Label>
            <properties name="AmountTotal" />
          </Label>
          <Label>
            <properties name="VatTotal" />
          </Label>
          <Label>
            <properties name="Total" />
          </Label>
         </FlowPanel>
        <FlowPanel>
          <Label>
            <properties name="Currency" />
          </Label>
          <Label>
            <properties name="Currency" />
          </Label>
          <Label>
            <properties name="Currency" />
          </Label>
        </FlowPanel>
        <FlowPanel>
          <Label>
            <properties name="RateAmountTotal" />
          </Label>
          <Label>
            <properties name="RateVatTotal" />
          </Label>
          <Label>
            <properties name="RateTotal" />
          </Label>
        </FlowPanel>
      </row>
    </Table>

    <HorizontalPanel style="&section;">
      <Label html="Suma žodžiais:" />
      <Label name="TotalInWords" />
    </HorizontalPanel>

    <TextLabel source="Term" style="&section; &bold; white-space: pre-wrap;">
      <renderToken source="Term" prefix="Sąskaitą apmokėti iki: " />
    </TextLabel>

    <TextLabel source="Notes" style="white-space: pre-wrap;" />

    <Table style="width: 100%; margin-top: 10px;">
      <row style="&bold;">
        <Label html="Išdavė" />
        <Label html="Priėmė" />
      </row>

      <row style="font-size: xx-small;">
        <Label html="(vardas, pavardė, pareigos ir parašas)" />
        <Label html="(vardas, pavardė, pareigos ir parašas)" />
      </row>

      <row>
        <TextLabel source="Manager" style="margin-top: 5px;">
          <renderToken source="ManagerFirstName" />
          <renderToken source="ManagerLastName" />
        </TextLabel>
      </row>
    </Table>
  </FlowPanel>
</f:Form>
